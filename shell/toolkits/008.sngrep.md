# sngrep

- F8 可以打开设置
- 配置手册： https://github-wiki-see.page/m/irontec/sngrep/wiki/Configuration
- alias 配置：
  - 系统配置文件 `/etc/sngreprc` or `/usr/local/etc/sngreprc`
  - 用户配置文件 `~/.sngreprc`

```sh
sngrep -d any "sip.Method == REGISTER and (sip.Cseq.method != REGISTER or sip.Status-Code ==0)" # d device
sngrep "REGISTER sip" # 只抓取 Register 请求的包，好像 sngrep 就是简单的文本匹配
sngrep "OPTIONS sip" # OPTIONS 探测

sngrep -c 02161577610 # 匹配支持前缀匹配

# -N 不显示 sngrep 界面，一般直接在界面上看就不加

# 抓媒体流用 -r，输出到文件用 -O，后面
sudo sngrep -r 0081344313336 -O 3336.pcap
sudo sngrep -r 0081344313336 -O 3336.pcap host <ip>
sudo sngrep -r 0081344313336 -O 3336.pcap

# 后台执行抓包，限制 300 个 session，超过后进行滚动
# sudo -s
nohup sngrep -RNcr 9706192336 -l 300 -O 0222.pcap &

# -l 限制抓取的 dialogs 数
# -R 滚动抓包（Remove Old），limit 限制

# 打开文件
sngrep -I 3336.pcap

-N 不显示界面，直接开抓
-R 滚动，自动删除旧的会话
-l limit 改变默认的最大抓包会话个数
```

nohup sngrep -RNc -l 30 -O inv-2028.pcap &
