# lstopo

来源于 hwloc 包，通过 `apt install -y hwloc` 安装。

```sh
lstopo -.ascii # 以 asici 格式输出
```

## 输出案例解释

- Core：核心，表示 CPU 的核数。
- PU：processing unit，处理器单元。一个 Core 中有两个 PU 通常是因为用了超线程技术，相当于逻辑 CPU。
- PCI：Peripheral Component Interconnect，外设组件连接。
- PCI X:X 表示 PCI 的 ID。
- 可用 `lspci -nn | grep X:X` 来确认对应 PCI 是设备
- L1、L2、L3：代表有三级缓存。
- L1i、L1d：分别代表一级指令缓存和一级数据缓存。

```sh
/----------------------------------------------------------------------------\
| Machine (7976MB)                                                           |
|                                                                            |
| /----------------------------------\            /---------------\          |
| | Package P#0                      |  ++--+-----+ PCI 8086:7010 |          |
| |                                  |      |     \---------------/          |
| | /------------------------------\ |      |                                |
| | | L3 (33MB)                    | |      |     /----------------\         |
| | \------------------------------/ |      +-----+ PCI 1013:00b8  |         |
| |                                  |      |     |                |         |
| | /-------------\  /-------------\ |      |     | /------------\ |         |
| | | L2 (1024KB) |  | L2 (1024KB) | |      |     | | controlD64 | |         |
| | \-------------/  \-------------/ |      |     | \------------/ |         |
| |                                  |      |     |                |         |
| | /------------\   /------------\  |      |     | /-------\      |         |
| | | L1d (32KB) |   | L1d (32KB) |  |      |     | | card0 |      |         |
| | \------------/   \------------/  |      |     | \-------/      |         |
| |                                  |      |     \----------------/         |
| | /------------\   /------------\  |      |                                |
| | | L1i (32KB) |   | L1i (32KB) |  |      |     /---------------\          |
| | \------------/   \------------/  |      +-----+ PCI 1af4:1000 |          |
| |                                  |      |     \---------------/          |
| | /------------\   /------------\  |      |                                |
| | | Core P#0   |   | Core P#1   |  |      |     /+----------------------+\ |
| | |            |   |            |  |      +-----+ 2 x { PCI 1af4:1001 } || |
| | | /--------\ |   | /--------\ |  |            \+----------------------+/ |
| | | | PU P#0 | |   | | PU P#2 | |  |                                       |
| | | \--------/ |   | \--------/ |  |                                       |
| | | /--------\ |   | /--------\ |  |                                       |
| | | | PU P#1 | |   | | PU P#3 | |  |                                       |
| | | \--------/ |   | \--------/ |  |                                       |
| | \------------/   \------------/  |                                       |
| \----------------------------------/                                       |
\----------------------------------------------------------------------------/
/----------------------------------------------------------------------------\
| Host: xxx                                                    |
|                                                                            |
| Indexes: physical                                                          |
|                                                                            |
| Date: Sat Jan 18 23:40:17 2025                                             |
\----------------------------------------------------------------------------/
```
