# DNS

## 基本概念

目的：域名解析服务，将域名解析成 IP。
把 DNS 就理解成一个 Web 服务，它封装了一个分布式数据库，给你提供了查询操作。

记录类型：
- A（Address）：域名和 IP 的对应关系
- CName（Canonical Name）：（别名）域名和域名的对应关系
- NS（Name Server）：记录解析域名服务器地址的对应关系。

根域名服务器：全球 13 个。10个在美国，英国、瑞典、日本各一个。其他国家有根服务器的镜像服务器（所以不怕被断）

域名的解析流程：
- local DNS，若无走根，根返回一个 NS 记录给出下一个服务器名，直到找到地址

流程(xxx.a.baidu.com)：
- 浏览器缓存
- 操作系统缓存
- hosts 文件
- local DNS（LDNS）
    - 1. 找 a.baidu.com 的 NS 服务器
    - 2. 找 baidu.com 的 NS 服务器
    - 3. 找 .com 的 NS 服务器
    - 4. 找 . 即根域名的服务器（操作系统自己知道）

## 优化

- 提前做好 DNS 缓存
- 域名可以对应多个 IP => 通过 DNS 做负载均衡

优点：配置简单，没有成本，DNS 会自动支持分发 IP
缺点：记录的添加修改是有时效性的（尤其是删除一个 IP 记录时）；负载均衡算法无法控制（RR 的）
