# 错误码

- [FS 错误码速查表](https://www.cnblogs.com/yjmyzz/p/freeswitch-hangup-cause.html)
- SIP 错误码速查参考 [RFC-3261](https://www.rfc-editor.org/rfc/rfc3261#section-21)

FS 的错误码不同于 SIP 的错误码。

## FS

### USER_BUSY 486

直观：用户忙。
解释：表示被叫方由于触发了用户忙碌的条件不能接受本呼叫，原因可能来自于被叫用户，也可能是线路。在用户决定为忙碌时表明用户的设备和呼叫是兼容的。
注意：可能是线路网络原因。
例证：网关线路配错到某个私有网关，造成大批量此问题。

### INCOMPATIBLE_DESTINATION 488

直观：不兼容的目的地
解释：通常表明创建呼叫连接的时候一些属性无法兼容。
方法：抓包，比对 SDP 属性信息。
例证：数据速率、IP v4 还是 v6 等。
实例：在坐席侧 webrtc 场景中，invite 坐席时发现 candidate 有两条 udp 记录，但坐席侧 180 SDP 携带 c=IN IP4 0.0.0.0，candidate 显示一条 tcp 记录，日志中有 no suitable candidates found 并响应 488 INCOMPATIBLE_DESTINATION。

## SIP

### 606 NotAcceptable

直观：不可接受的
解释：可确定消息已到达用户终端，但 SDP 部分属性不支持
例证：媒体、bandwidth、地址 style 等
补充：响应中可能会在 Warning 头域中携带 reasons 列表解释

### 488 Not Acceptable Here

解释：同 606，但仅应用于被 Request-URI 指定的资源地址
经验：客户端只支持 PCMA，但对方请求的是 PCMU 编码，导致本端返回 488

### 480 Temporarily not available

解释：被叫的终端系统已经联系成功，但被叫当前不可用（例如没有登录、登录了但状态妨碍了交流、或开启了“免打扰”模式）
信息：Retry-After 头可能携带了更好的联系时间
信息：Reason 头可能暗示了更精确的原因
信息：被叫也有可能在另一个地方可用（但当前 server 不知道）
信息：486（Busy Here）会携带更精确的原因
信息：代理服务器也可能返回这个状态——通过 Request-URI 识别到用户，但没有一个合法的转发目的
信息：不知道底层原理，FreeSwitch 将这个 SIP 响应记录成 NO_USER_RESPONSE
