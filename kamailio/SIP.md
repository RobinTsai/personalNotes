# SIP

- Client REGISTER 发出信息
  - Contact: **话机本地 IP 和端口**
  - From： 号码@注册目的 IP 和端口
  - Via: 会加入本地 IP 和端口
- Proxy 代理 REGISTER 发出的信息
  - Contact: 会变成收到 Client REGISTER 信令的 IP 和端口，即 **Client 出网的 IP 和端口**
  - From： 号码@注册目的 IP 和端口
  - Via: 会 **再次** 加入自己 Proxy 的 IP 和端口：**公网 IP**
- Proxy 收到服务端的 200 OK
  - Contact：携带 **Client 的出网 IP 和端口**
  - Via 和 Proxy 代理 REGISTER 的 Via 一样
  - From： 还是号码@注册目的 IP 和端口
  - 发出去的时候，Via 去掉自己
- Client 发出的 INVITE 信令
  - Via： 加入自己的
  - Contact： 携带的是 **号码@自己的出口 IP 和端口**
  - From： 号码@注册的目的 IP 和端口
  - To： 被叫号码@注册的目的 IP 和端口
- Proxy 将 INVITE 转到服务端
  - Via： 加入自己的（公网 IP）
  - Contact： 没变（携带的是 **号码@Client出网 IP 和端口**）
  - From / To： 没变
