# 线程数的计算

1. 初步计算：**线程数 = cpu核数 * cpu利用率 * (1 + w / c)**
2. 实际线程数以压测结果为准。


- cpu 利用率：CPU 在 1s 中工作时间的占比（有时可以忽略此因数，因为服务器上不一定只有这个服务）
- w：等待时间，wait 时间
- c：计算时间，compute 时间

w、c 可以通过代码统计测试。


> 课程中讲述的 w 和 c 的统计比较简单，现实代码那么多语句，怎么能很方便地区分开计算和等待时间呢，自己意会吧，可能自己去找 IO 的其他的都认为是计算的就可以。

---
 
> 另有说公式为：`线程数 = cpu 核数 / (1 - 阻塞系数)` 的，其实和上方的公式一样，只是 `阻塞系数 = c / (w + c)`。
> 阻塞系数可以认为：计算密集型为 0，IO 密集型为 1。
