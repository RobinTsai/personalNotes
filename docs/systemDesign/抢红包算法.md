# 抢红包算法

在竞争时候耗大量 CPU 去计算肯定不搞笑，所以红包金额是事先生成的。

生成方法：
- 随机金额法
- 顶顶顶

## 随机金额法

如 100 块钱 10 个红包，没人至少抢到 0.01，那么随机分配第一个红包金额时，为确保后面 9 人每一个至少有 0.01，应该在 0 到 `100 - 0.01 * 9` 内随机，即 `0~99.91`。后面依次类推。

这种方法不公平。

## 二倍均值法

从区间 `(min, M/N * 2)` 中生成随机数，min 为最小分配金额，M 为红包剩余金额，N 为红包剩余数量。

> 上述区间的由来
> 考虑：对于区间 `(min, max)` 生成随机数的平均值（中间值）是 `(min + max) / 2`。在 M 块钱分 N 个人的过程中，我们期望这个公式等于 M/N。因为 min 趋向于 0，所以我们期望 `(min + max) / 2 ≈ max / 2 = M/N`，所以 `max = M/N * 2` 