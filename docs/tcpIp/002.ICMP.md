# ICMP

- Internet Control Message Protocol
- Internet 控制报文协议
- 工作在 IP 层（网络层），ICMP 报文在 IP 数据包内部被传输
- 用于在 IP 主机、路由器之间传递控制消息
- 控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息，不传输用户数据
- 官方解释：传递差错报文及其他需要注意的信息
- 分为查询报文和差错报文两大类，
- ICMP 有 15 种不同的类型（类型字段）
- ICMP 前四字节为固定格式：8bit 类型，8bit 代码编号，16bit 检验和
- 由类型字段和代码字段共同决定 ICMP 报文的类型
- 类型 0，代码 0 表示 ping 应答（回显应答）
- 类型 8，代码 0 表示 ping 请求（请求回显）

|类型|代码|描述|
|---|---|---|
|8  |0  |请求回显|
|0  |0  |回显应答|
|3  |-  | 目的不可达类 |
|3  |0  | 网络不可达 |
|3  |1  | 主机不可达 |
|3  |3  | 端口不可达 |
|4  |0  | 源端被关闭 |
|13  |0  | 时间戳请求 |
|14  |0  | 时间戳应答 |
|17  |0  | 地址掩码请求 |
|18  |0  | 地址掩码应答 |
|... |...|...|


- ICMP 地址掩码请求与应答，用于无盘系统在引导过程中获取自己的子网掩码。
- ICMP 时间戳请求与应答，用于系统向另一个系统查询时间（同步的是当天的时间，而不是日期）
