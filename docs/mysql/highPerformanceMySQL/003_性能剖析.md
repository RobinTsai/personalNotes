# 性能剖析

- 原则一：性能即响应时间。
- 原则二：无法测量就无法有效地优化。

对于原则一的反例解释：CPU 上升可能是 CPU 利用率提高，不能作为衡量标准；吞吐量是性能优化的衍生品，可能是执行时间更短。

对于原则二：我们需要知道为什么服务器执行查询需要这么多时间，知道时间花在哪儿，然后去减少或消除不必要的时间消耗。

## 应用程序的性能剖析

首先，绝大多数问题都出现在应用程序对 MySQL 的使用上。

- 使用 APM 工具对应用性能进行监控：如 New Relic 会插入到应用程序中进行性能剖析，将收集到的数据发送到一个基于 Web 的仪表盘，使用仪表盘可以更容易利用面向响应时间的方法分析应用性能。

## 剖析 MySQL 的性能

- 服务端审计最有效的是慢查询日志

慢查询日志带来的 IO 开销几乎可以不计（实际在 CPU 密集型场景中有一定的影响）。
