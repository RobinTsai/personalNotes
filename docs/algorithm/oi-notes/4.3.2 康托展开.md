# 康托展开

**康托展开是一种特殊的哈希函数**，可以用来做数列的快速判重操作，如下面表格：

| state | 012 | 021 | 102 | 120 | 201 | 210 |
|:-----:|:---:|:---:|:---:|:---:|:---:|:---:|
|Cantor |  0  |  1  |  2  |  3  |  4  |  5  |

## 主要思想

由于一个数列的全排列共有 2^n 种，所以将所有可能的数列按由小到大的顺序排列的话，即正好能映射到 0 ~ 2^n-1 中。此时所映射的值 0 ~ 2^n-1 正好是全排列中小于当前 state 的排列的个数。

## 计算方法

以 2143 的全排列为例：
- 首位小于 2 的全排列，有 1\*3! 个。1 表示只有 1 个数比 2 小，3 表示首位后面有 3 个位。
- 首位为 2，次位小于 1 的全排列有 0*2! 个。
- 前两位为 21，第三位小于 4 的全排列有 1*1! 个。第一个 1 表示除了固定的前两位外比 4 小的数只有 1 个数。
- 前三位为 214 后，第四位小于 3 的全排列有 0 个。
- 因此 `Cantor(2143) = 1*3! + 0*2! + 1*1! + 0 = 7`

公式 `X = a[n]*(n-1)! + a[n-1]*(n-2)! + ...  + a[1]*0`，其中 `a[i]` 表示除去前 i-1 位数字后比第 i 位小的数字的个数。

上述过程逆过来即可 **求某个集合所有全排列的字典序中第 k 大的排列**。

---

> 引入康托展开主要是在 **八数码问题** 中作为一种优化判断去重的方法。虽然某些高级语言中已经有快速操作的特性，但对于基础无快速操作的语言来说，掌握它的思想也很有必要。